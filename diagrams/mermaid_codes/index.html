
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sitename.example/diagrams/mermaid_codes/">
      
      
      
      
      <link rel="icon" href="../../assets/logo/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>GlobeTalk - Diagrams - GlobeTalk Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i,700,700i%7CRed+Hat+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Merriweather Sans";--md-code-font:"Red Hat Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/styling/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#globetalk-diagrams" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="GlobeTalk Documentation" class="md-header__button md-logo" aria-label="GlobeTalk Documentation" data-md-component="logo">
      
  <img src="../../assets/logo/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GlobeTalk Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GlobeTalk - Diagrams
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="GlobeTalk Documentation" class="md-nav__button md-logo" aria-label="GlobeTalk Documentation" data-md-component="logo">
      
  <img src="../../assets/logo/logo.png" alt="logo">

    </a>
    GlobeTalk Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/matchmaking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Matchmaking API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Profile API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/moderation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Moderation API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UI Modules
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reasoning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reasoning behind GlobeTalk Design
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="globetalk-diagrams">GlobeTalk - Diagrams</h1>
<h1 id="chatflow-sequence">Chatflow sequence</h1>
<pre class="mermaid"><code>sequenceDiagram
    autonumber
    participant UA as User A
    participant System as System
    participant DB as Firestore
    participant Trans as Translation API
    participant FCM as Firebase Cloud Messaging
    participant UB as User B

    UA-&gt;&gt;System: Send message to User B
    System-&gt;&gt;DB: Store original message
    System-&gt;&gt;Trans: Request translation (if needed)
    Trans--&gt;&gt;System: Return translated message
    System-&gt;&gt;DB: Store translated message
    System-&gt;&gt;FCM: Send push notification
    FCM--&gt;&gt;UB: Deliver notification
    System--&gt;&gt;UA: Confirm message sent
    System--&gt;&gt;UB: Real-time message update
    UB-&gt;&gt;System: Send reaction/emoji
    System-&gt;&gt;DB: Store reaction
    System--&gt;&gt;UA: Real-time reaction update
    Note right of System: All messages stored with timestamp
    Note left of UB: User receives both original and translated text
</code></pre>
<h1 id="admin-moderation-sequence">Admin Moderation sequence</h1>
<pre class="mermaid"><code>
sequenceDiagram
    autonumber
    participant User as Reporting User
    participant System as System
    participant ContentAPI as Content Moderation API
    participant Admin as Administrator
    participant DB as Firestore
    participant Target as Reported User
    User-&gt;&gt;System: Report inappropriate content
    System-&gt;&gt;DB: Store report with metadata
    System-&gt;&gt;ContentAPI: Analyze flagged content
    ContentAPI--&gt;&gt;System: Return moderation score
    alt Auto-moderate (high confidence)
        System-&gt;&gt;DB: Auto-delete offensive content
        System-&gt;&gt;DB: Log moderation action
        System--&gt;&gt;User: Notify action taken
    else Requires human review
        System-&gt;&gt;Admin: Flag for manual review
        Admin-&gt;&gt;System: Access Admin Dashboard
        System-&gt;&gt;DB: Fetch report details
        DB--&gt;&gt;Admin: Display report and content
        Admin-&gt;&gt;System: Make moderation decision
        alt Ban user
            System-&gt;&gt;DB: Update user status to banned
            System-&gt;&gt;Target: Send account suspension notice
        else Warn user
            System-&gt;&gt;Target: Send warning notification
            System-&gt;&gt;DB: Log warning
        else Dismiss report
            System-&gt;&gt;DB: Mark report as dismissed
        end
        System-&gt;&gt;DB: Update report status
        System--&gt;&gt;User: Notify resolution
        System-&gt;&gt;DB: Log admin action
    end
    Note over System: All actions logged for audit trail
    Note over Admin: Admin can generate reports for analytics</code></pre>
<h1 id="friendship-system-sequence">Friendship System Sequence</h1>
<pre class="mermaid"><code>sequenceDiagram
    autonumber
    participant UA as User A
    participant System as System
    participant MatchAPI as Matchmaking API
    participant FriendAPI as Friendship API
    participant DB as Firestore
    participant FCM as Push Notifications
    participant UB as User B

    UA-&gt;&gt;System: Access contact search
    System-&gt;&gt;MatchAPI: Request user suggestions
    MatchAPI-&gt;&gt;DB: Query compatible users
    DB--&gt;&gt;MatchAPI: Return filtered users
    MatchAPI--&gt;&gt;System: Provide suggestions
    System--&gt;&gt;UA: Display potential contacts

    UA-&gt;&gt;System: Send friend request to User B
    System-&gt;&gt;FriendAPI: Process friend request
    FriendAPI-&gt;&gt;DB: Check existing relationship

    alt No existing relationship
        FriendAPI-&gt;&gt;DB: Create friendship record (pending)
        DB--&gt;&gt;FriendAPI: Confirm creation
        FriendAPI-&gt;&gt;FCM: Send notification to User B
        FCM--&gt;&gt;UB: Friend request notification
        FriendAPI--&gt;&gt;System: Request sent confirmation
        System--&gt;&gt;UA: Show request pending

        UB-&gt;&gt;System: View friend requests
        System-&gt;&gt;DB: Fetch pending requests
        DB--&gt;&gt;System: Return requests list
        System--&gt;&gt;UB: Display friend requests

        UB-&gt;&gt;System: Accept friend request
        System-&gt;&gt;FriendAPI: Process acceptance
        FriendAPI-&gt;&gt;DB: Update friendship status to accepted
        FriendAPI-&gt;&gt;FCM: Notify User A of acceptance
        FCM--&gt;&gt;UA: Friend request accepted notification
        FriendAPI--&gt;&gt;System: Friendship established
        System--&gt;&gt;UB: Show new contact in list

        Note over System: Both users can now chat

    else Relationship exists
        FriendAPI--&gt;&gt;System: Return existing status
        System--&gt;&gt;UA: Show current relationship status
    end

    Note over DB: Mutual friendship enforced by Cloud Functions
    Note over System: All friendship changes trigger real-time updates</code></pre>
<h1 id="usecase-diagram">UseCase Diagram</h1>
<p><pre class="mermaid"><code>graph TD
    User[User/Pen Pal]

    %% User Use Cases
    UC1[Sign Up / Log In]
    UC2[Complete Onboarding]
    UC3[View Home/Dashboard]
    UC4[Search Contacts]
    UC5[Send Friend Request]
    UC6[Chat with Contact]
    UC7[Edit Profile]
    UC8[Manage Settings]
    UC9[View Notifications]
    UC10[Block/Report User]
    UC11[Auto-Translate Messages]

    %% User connections
    User --&gt; UC1
    User --&gt; UC2
    User --&gt; UC3
    User --&gt; UC4
    User --&gt; UC5
    User --&gt; UC6
    User --&gt; UC7
    User --&gt; UC8
    User --&gt; UC9
    User --&gt; UC10

    %% Include/Extend
    UC6 -.-&gt;|includes| UC11
    UC6 -.-&gt;|includes| UC10
    UC4 -.-&gt;|extends| UC5

    %% Styling
    classDef userClass fill:#e1f5fe
    class User userClass
</code></pre>
<pre class="mermaid"><code>graph TD
    Admin[Administrator/Moderator]
    System[System]

    %% Admin Use Cases
    AC1[Admin Log In]
    AC2[View Admin Dashboard]
    AC3[Manage Users]
    AC4[Moderate Chat]
    AC5[View Analytics]
    AC6[Generate Reports]
    AC7[Manage Admin Settings]

    %% System Use Cases
    SC1[Process Matchmaking]
    SC2[Handle Realtime Updates]
    SC3[Auto-Moderate Content]
    SC4[Aggregate Analytics]

    %% Admin connections
    Admin --&gt; AC1
    Admin --&gt; AC2
    Admin --&gt; AC3
    Admin --&gt; AC4
    Admin --&gt; AC5
    Admin --&gt; AC6
    Admin --&gt; AC7

    %% System connections
    System --&gt; SC1
    System --&gt; SC2
    System --&gt; SC3
    System --&gt; SC4

    %% Include relationships
    AC4 -.-&gt;|includes| SC3

    %% Styling
    classDef adminClass fill:#fff3e0
    classDef systemClass fill:#f3e5f5

    class Admin adminClass
    class System systemClass</code></pre></p>
<h1 id="class-diagram">Class Diagram</h1>
<pre class="mermaid"><code>classDiagram
    class User {
        +String userID
        +String email
        +String displayName
        +Boolean activeStatus
        +DateTime lastSeen
        +Boolean isAdmin
        +signUp()
        +logIn()
        +updateProfile()
        +deleteAccount()
        +deactivateAccount()
    }
    class Profile {
        +String userID
        +Int age
        +String gender
        +String residence
        +String bio
        +Array languages
        +Array interests
        +String timezone
        +Boolean hideActiveStatus
        +DateTime createdAt
        +updateProfile()
        +getProfile()
    }
    class Message {
        +String messageID
        +String senderID
        +String receiverID
        +String content
        +String translatedContent
        +DateTime timestamp
        +Array reactions
        +Boolean isRead
        +Boolean isFlagged
        +sendMessage()
        +addReaction()
        +markAsRead()
        +flagMessage()
    }
    class Friendship {
        +String friendshipID
        +String requesterID
        +String receiverID
        +String status
        +DateTime requestedAt
        +DateTime acceptedAt
        +sendRequest()
        +acceptRequest()
        +rejectRequest()
        +removeFriend()
    }
    class Notification {
        +String notificationID
        +String userID
        +String type
        +String content
        +Boolean isRead
        +DateTime createdAt
        +sendNotification()
        +markAsRead()
    }
    class Report {
        +String reportID
        +String reporterID
        +String reportedUserID
        +String reportedMessageID
        +String reason
        +String status
        +DateTime createdAt
        +DateTime resolvedAt
        +submitReport()
        +reviewReport()
        +resolveReport()
    }
    class Admin {
        +String adminID
        +Array permissions
        +DateTime lastLogin
        +viewDashboard()
        +manageUsers()
        +moderateContent()
        +generateReports()
        +viewAnalytics()
    }
    class Analytics {
        +String analyticsID
        +Date date
        +Int activeUsers
        +Int messagesSent
        +Int flaggedReports
        +Int newSignups
        +aggregateDaily()
        +generateCSV()
        +generatePDF()
    }
    User "1" --o "1" Profile : has
    User "1" --o "0..*" Message : sends
    User "1" --o "0..*" Message : receives
    User "1" --o "0..*" Friendship : initiates
    User "1" --o "0..*" Friendship : receives
    User "1" --o "0..*" Notification : receives
    User "1" --o "0..*" Report : files
    User "1" --o "0..*" Report : reported_in
    Admin "1" --|&gt; User : extends
    Admin "1" --o "0..*" Report : reviews
    Admin "1" --o "0..*" Analytics : generates
    Message "1" --o "0..*" Report : flagged_in</code></pre>
<h1 id="architecture-diagram">Architecture diagram</h1>
<pre class="mermaid"><code>graph TB
    subgraph "Client Layer"
        Web[Web App]
        Mobile[Mobile App]
    end
    subgraph "Authentication"
        Auth[Firebase Authentication]
        OAuth[Third-party OAuth]
    end
    subgraph "API Layer"
        Gateway[API Gateway]
        UserAPI[User Management API]
        ChatAPI[Chat API]
        MatchAPI[Matchmaking API]
        FriendAPI[Friendship System API]
        ModAPI[Moderation API]
        TransAPI[Translation API]
        SearchAPI[Search API]
        PrivacyAPI[Privacy Settings API]
        RoleAPI[Role-based Access Control API]
    end
    subgraph "Business Logic"
        Functions[Cloud Functions]
        MatchEngine[Matching Engine]
        ContentMod[Content Moderation]
        Analytics[Analytics Engine]
        NotificationService[Notification Service]
    end
    subgraph "Database Layer"
        Firestore[(Firestore)]
        Storage[Firebase Storage]
    end
    subgraph "External Services"
        FCM[Firebase Cloud Messaging]
        Azure[Azure Content Safety]
        Perspective[Perspective API]
        TranslationSvc[Translation Service]
    end
    subgraph "Admin Interface"
        AdminWeb[Admin Dashboard]
        Reports[Report Generator]
    end
    Web --&gt; Gateway
    Mobile --&gt; Gateway
    AdminWeb --&gt; Gateway
    Web --&gt; Auth
    Mobile --&gt; Auth
    AdminWeb --&gt; Auth
    Auth --&gt; OAuth
    Gateway --&gt; UserAPI
    Gateway --&gt; ChatAPI
    Gateway --&gt; MatchAPI
    Gateway --&gt; FriendAPI
    Gateway --&gt; ModAPI
    Gateway --&gt; TransAPI
    Gateway --&gt; SearchAPI
    Gateway --&gt; PrivacyAPI
    Gateway --&gt; RoleAPI
    UserAPI --&gt; Functions
    ChatAPI --&gt; Functions
    MatchAPI --&gt; MatchEngine
    FriendAPI --&gt; Functions
    ModAPI --&gt; ContentMod
    Functions --&gt; Firestore
    MatchEngine --&gt; Firestore
    ContentMod --&gt; Firestore
    Analytics --&gt; Firestore
    UserAPI --&gt; Storage
    NotificationService --&gt; FCM
    ContentMod --&gt; Azure
    ContentMod --&gt; Perspective
    TransAPI --&gt; TranslationSvc
    Functions --&gt; FCM
    Reports --&gt; Functions
    Analytics --&gt; Reports
    Firestore -.-&gt;|Real-time listeners| Web
    Firestore -.-&gt;|Real-time listeners| Mobile
    classDef clientLayer fill:#e3f2fd
    classDef apiLayer fill:#f3e5f5
    classDef businessLayer fill:#e8f5e8
    classDef dataLayer fill:#fff3e0
    classDef externalLayer fill:#fce4ec
    classDef adminLayer fill:#f1f8e9
    class Web,Mobile clientLayer
    class Gateway,UserAPI,ChatAPI,MatchAPI,FriendAPI,ModAPI,TransAPI,SearchAPI,PrivacyAPI,RoleAPI apiLayer
    class Functions,MatchEngine,ContentMod,Analytics,NotificationService businessLayer
    class Firestore,Storage dataLayer
    class FCM,Azure,Perspective,TranslationSvc externalLayer
    class AdminWeb,Reports adminLayer</code></pre>
<h1 id="data-flow-diagram">Data Flow Diagram</h1>
<pre class="mermaid"><code>graph TD
    %% External Entities
    User[User]
    Admin[Administrator]

    %% Processes
    P1[1.0 User Authentication]
    P2[2.0 Profile Management]
    P3[3.0 Matchmaking System]
    P4[4.0 Chat Processing]
    P5[5.0 Friendship Management]
    P6[6.0 Content Moderation]
    P7[7.0 Notification System]
    P8[8.0 Analytics Processing]

    %% Data Stores
    DS1[(D1: User Profiles)]
    DS2[(D2: Messages)]
    DS3[(D3: Friendships)]
    DS4[(D4: Reports)]
    DS5[(D5: Moderation Logs)]
    DS6[(D6: Analytics)]
    DS7[(D7: Notifications)]

    %% External Systems
    EXT1[Translation API]
    EXT2[Content Moderation API]
    EXT3[Push Notification Service]

    %% User flows
    User --&gt;|Login credentials| P1
    P1 --&gt;|Authentication token| User
    P1 --&gt;|User session| P2

    User --&gt;|Profile data| P2
    P2 --&gt;|Profile info| DS1
    DS1 --&gt;|Profile details| P2
    P2 --&gt;|Updated profile| User

    User --&gt;|Search filters| P3
    P3 --&gt;|User preferences| DS1
    DS1 --&gt;|User data| P3
    P3 --&gt;|Match suggestions| User

    User --&gt;|Friend request| P5
    P5 --&gt;|Friendship data| DS3
    DS3 --&gt;|Friend status| P5
    P5 --&gt;|Request result| User
    P5 --&gt;|Friendship notification| P7

    User --&gt;|Chat message| P4
    P4 --&gt;|Translation request| EXT1
    EXT1 --&gt;|Translated text| P4
    P4 --&gt;|Message data| DS2
    DS2 --&gt;|Chat history| P4
    P4 --&gt;|Message delivery| User
    P4 --&gt;|New message notification| P7

    User --&gt;|Report content| P6
    P6 --&gt;|Moderation request| EXT2
    EXT2 --&gt;|Content analysis| P6
    P6 --&gt;|Report data| DS4
    P6 --&gt;|Moderation log| DS5

    %% Admin flows
    Admin --&gt;|Moderation action| P6
    P6 --&gt;|Action result| Admin
    DS4 --&gt;|Report details| P6
    DS5 --&gt;|Moderation history| P6

    Admin --&gt;|Analytics request| P8
    P8 --&gt;|Usage data| DS1
    P8 --&gt;|Message stats| DS2
    P8 --&gt;|Report stats| DS4
    DS6 --&gt;|Analytics data| P8
    P8 --&gt;|Analytics report| Admin

    %% Notification flows
    P7 --&gt;|Notification data| DS7
    P7 --&gt;|Push notification| EXT3
    EXT3 --&gt;|Notification delivery| User
    DS7 --&gt;|Notification history| P7

    %% System data flows
    P4 --&gt;|Usage metrics| P8
    P5 --&gt;|Activity metrics| P8
    P6 --&gt;|Moderation metrics| P8
    P8 --&gt;|Aggregated data| DS6

    classDef entity fill:#ffeb3b
    classDef process fill:#4caf50
    classDef datastore fill:#2196f3
    classDef external fill:#ff9800

    class User,Admin entity
    class P1,P2,P3,P4,P5,P6,P7,P8 process
    class DS1,DS2,DS3,DS4,DS5,DS6,DS7 datastore
    class EXT1,EXT2,EXT3 external</code></pre>
<h1 id="component-diagram">Component Diagram</h1>
<pre class="mermaid"><code>graph TB
    subgraph "Frontend Components"
        WebApp[Web Application]
        MobileApp[Mobile Application]
        AdminDash[Admin Dashboard]

        subgraph "Web App Modules"
            AuthComp[Authentication Component]
            ChatComp[Chat Component]
            ProfileComp[Profile Component]
            SearchComp[Search Component]
            NotifComp[Notification Component]
        end

        subgraph "Mobile App Modules"
            MAuthComp[Mobile Auth Component]
            MChatComp[Mobile Chat Component]
            MProfileComp[Mobile Profile Component]
            MSearchComp[Mobile Search Component]
            MNotifComp[Mobile Notification Component]
        end

        subgraph "Admin Modules"
            AdminAuth[Admin Authentication]
            UserMgmt[User Management]
            ContentMod[Content Moderation]
            Analytics[Analytics Dashboard]
            ReportGen[Report Generator]
        end
    end

    subgraph "Backend Components"
        APIGateway[API Gateway]

        subgraph "Core Services"
            UserService[User Service]
            ChatService[Chat Service]
            MatchService[Matchmaking Service]
            FriendService[Friendship Service]
            ModerationService[Moderation Service]
            NotificationService[Notification Service]
            AnalyticsService[Analytics Service]
        end

        subgraph "Infrastructure Components"
            AuthProvider[Firebase Auth Provider]
            DatabaseLayer[Database Access Layer]
            StorageLayer[Storage Access Layer]
            CloudFunctions[Cloud Functions Runtime]
        end
    end

    subgraph "External Services"
        TranslationAPI[Translation API]
        ContentModerationAPI[Content Moderation API]
        PushService[Push Notification Service]
        ThirdPartyAuth[OAuth Providers]
    end

    subgraph "Data Layer"
        Firestore[(Firestore Database)]
        FirebaseStorage[Firebase Storage]
        Cache[Redis Cache]
    end

    %% Frontend to Backend connections
    WebApp --&gt; APIGateway
    MobileApp --&gt; APIGateway
    AdminDash --&gt; APIGateway

    %% Component internal connections
    WebApp --&gt; AuthComp
    WebApp --&gt; ChatComp
    WebApp --&gt; ProfileComp
    WebApp --&gt; SearchComp
    WebApp --&gt; NotifComp

    MobileApp --&gt; MAuthComp
    MobileApp --&gt; MChatComp
    MobileApp --&gt; MProfileComp
    MobileApp --&gt; MSearchComp
    MobileApp --&gt; MNotifComp

    AdminDash --&gt; AdminAuth
    AdminDash --&gt; UserMgmt
    AdminDash --&gt; ContentMod
    AdminDash --&gt; Analytics
    AdminDash --&gt; ReportGen

    %% API Gateway to Services
    APIGateway --&gt; UserService
    APIGateway --&gt; ChatService
    APIGateway --&gt; MatchService
    APIGateway --&gt; FriendService
    APIGateway --&gt; ModerationService
    APIGateway --&gt; NotificationService
    APIGateway --&gt; AnalyticsService

    %% Services to Infrastructure
    UserService --&gt; AuthProvider
    UserService --&gt; DatabaseLayer
    ChatService --&gt; DatabaseLayer
    ChatService --&gt; CloudFunctions
    MatchService --&gt; DatabaseLayer
    FriendService --&gt; DatabaseLayer
    FriendService --&gt; CloudFunctions
    ModerationService --&gt; DatabaseLayer
    ModerationService --&gt; CloudFunctions
    NotificationService --&gt; CloudFunctions
    AnalyticsService --&gt; DatabaseLayer
    AnalyticsService --&gt; CloudFunctions

    %% Infrastructure to Data Layer
    DatabaseLayer --&gt; Firestore
    StorageLayer --&gt; FirebaseStorage
    DatabaseLayer --&gt; Cache

    %% External Service connections
    AuthProvider --&gt; ThirdPartyAuth
    ChatService --&gt; TranslationAPI
    ModerationService --&gt; ContentModerationAPI
    NotificationService --&gt; PushService
    CloudFunctions --&gt; PushService

    %% Real-time connections
    Firestore -.-&gt;|Real-time listeners| ChatComp
    Firestore -.-&gt;|Real-time listeners| MChatComp
    Firestore -.-&gt;|Real-time listeners| NotifComp
    Firestore -.-&gt;|Real-time listeners| MNotifComp

    classDef frontend fill:#e3f2fd
    classDef backend fill:#e8f5e8
    classDef external fill:#fff3e0
    classDef data fill:#f3e5f5

    class WebApp,MobileApp,AdminDash,AuthComp,ChatComp,ProfileComp,SearchComp,NotifComp,MAuthComp,MChatComp,MProfileComp,MSearchComp,MNotifComp,AdminAuth,UserMgmt,ContentMod,Analytics,ReportGen frontend
    class APIGateway,UserService,ChatService,MatchService,FriendService,ModerationService,NotificationService,AnalyticsService,AuthProvider,DatabaseLayer,StorageLayer,CloudFunctions backend
    class TranslationAPI,ContentModerationAPI,PushService,ThirdPartyAuth external
    class Firestore,FirebaseStorage,Cache data</code></pre>
<h1 id="deployment-diagram">Deployment diagram</h1>
<pre class="mermaid"><code>graph TB
    subgraph "Client Devices"
        subgraph "User Devices"
            Browser[Web Browser]
            MobileDevice[Mobile Device]
        end

        subgraph "Admin Devices"
            AdminBrowser[Admin Web Browser]
        end
    end

    subgraph "CDN / Load Balancer"
        CDN[Content Delivery Network]
        LoadBalancer[Load Balancer]
    end

    subgraph "Google Cloud Platform"
        subgraph "Firebase Hosting"
            WebServer[Static Web Assets]
            AdminWeb[Admin Interface]
        end

        subgraph "App Engine / Cloud Run"
            APIServer1[API Server Instance 1]
            APIServer2[API Server Instance 2]
            APIGateway[API Gateway]
        end

        subgraph "Cloud Functions"
            CF1[Matchmaking Functions]
            CF2[Moderation Functions]
            CF3[Analytics Functions]
            CF4[Notification Functions]
        end

        subgraph "Firebase Services"
            FireAuth[Firebase Authentication]
            FireDB[(Firestore Database)]
            FireStorage[Firebase Storage]
            FCM[Firebase Cloud Messaging]
        end

        subgraph "Monitoring &amp; Logging"
            CloudLogging[Cloud Logging]
            CloudMonitoring[Cloud Monitoring]
            ErrorReporting[Error Reporting]
        end
    end

    subgraph "External Services"
        TranslateAPI[Google Translate API]
        AzureContent[Azure Content Safety]
        PerspectiveAPI[Perspective API]
        OAuth[OAuth Providers&lt;br/&gt;Google, Facebook, etc.]
    end

    subgraph "Mobile App Stores"
        AppStore[Apple App Store]
        PlayStore[Google Play Store]
    end

    %% Client connections
    Browser --&gt;|HTTPS| CDN
    MobileDevice --&gt;|HTTPS/WSS| LoadBalancer
    AdminBrowser --&gt;|HTTPS| CDN

    %% CDN and Load Balancer
    CDN --&gt; WebServer
    CDN --&gt; AdminWeb
    LoadBalancer --&gt; APIGateway

    %% API Gateway routing
    APIGateway --&gt; APIServer1
    APIGateway --&gt; APIServer2

    %% API Server connections
    APIServer1 --&gt; CF1
    APIServer1 --&gt; CF2
    APIServer1 --&gt; CF3
    APIServer1 --&gt; CF4
    APIServer2 --&gt; CF1
    APIServer2 --&gt; CF2
    APIServer2 --&gt; CF3
    APIServer2 --&gt; CF4

    %% Cloud Functions to Firebase
    CF1 --&gt; FireDB
    CF2 --&gt; FireDB
    CF3 --&gt; FireDB
    CF4 --&gt; FireDB
    CF4 --&gt; FCM

    %% Firebase connections
    APIServer1 --&gt; FireAuth
    APIServer2 --&gt; FireAuth
    APIServer1 --&gt; FireDB
    APIServer2 --&gt; FireDB
    APIServer1 --&gt; FireStorage
    APIServer2 --&gt; FireStorage

    %% External API connections
    CF1 --&gt; TranslateAPI
    CF2 --&gt; AzureContent
    CF2 --&gt; PerspectiveAPI
    FireAuth --&gt; OAuth

    %% Mobile app distribution
    MobileDevice -.-&gt;|Download/Update| AppStore
    MobileDevice -.-&gt;|Download/Update| PlayStore

    %% Real-time connections
    FireDB -.-&gt;|Real-time updates| Browser
    FireDB -.-&gt;|Real-time updates| MobileDevice
    FCM -.-&gt;|Push notifications| MobileDevice

    %% Monitoring connections
    APIServer1 --&gt; CloudLogging
    APIServer2 --&gt; CloudLogging
    CF1 --&gt; CloudMonitoring
    CF2 --&gt; CloudMonitoring
    CF3 --&gt; CloudMonitoring
    CF4 --&gt; CloudMonitoring
    APIServer1 --&gt; ErrorReporting
    APIServer2 --&gt; ErrorReporting

    %% Deployment specifications
    WebServer -.-&gt;|"Static Files&lt;br/&gt;React/Vue Build"| Browser
    AdminWeb -.-&gt;|"Admin SPA&lt;br/&gt;React Dashboard"| AdminBrowser
    APIServer1 -.-&gt;|"Node.js/Python&lt;br/&gt;Auto-scaling"| APIGateway
    APIServer2 -.-&gt;|"Node.js/Python&lt;br/&gt;Auto-scaling"| APIGateway

    classDef client fill:#e3f2fd
    classDef hosting fill:#e8f5e8
    classDef compute fill:#fff3e0
    classDef database fill:#f3e5f5
    classDef external fill:#fce4ec
    classDef monitoring fill:#f1f8e9

    class Browser,MobileDevice,AdminBrowser,AppStore,PlayStore client
    class CDN,LoadBalancer,WebServer,AdminWeb hosting
    class APIServer1,APIServer2,APIGateway,CF1,CF2,CF3,CF4 compute
    class FireAuth,FireDB,FireStorage,FCM database
    class TranslateAPI,AzureContent,PerspectiveAPI,OAuth external
    class CloudLogging,CloudMonitoring,ErrorReporting monitoring</code></pre>
<h1 id="user-state-diagram">User State Diagram</h1>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Guest: User visits app

    Guest --&gt; Registering: Click Sign Up
    Guest --&gt; LoggingIn: Click Sign In

    Registering --&gt; Onboarding: Registration successful
    LoggingIn --&gt; Onboarding: First time login
    LoggingIn --&gt; Active: Returning user login

    Onboarding --&gt; ProfileSetup: Begin profile creation
    ProfileSetup --&gt; Active: Profile completed

    state Active {
        [*] --&gt; Online
        Online --&gt; Browsing: Browse contacts
        Online --&gt; Chatting: Open chat
        Online --&gt; Managing: Access settings

        Browsing --&gt; Online: Return to home
        Browsing --&gt; RequestSent: Send friend request

        RequestSent --&gt; Online: Request processed
        RequestSent --&gt; Connected: Request accepted

        Connected --&gt; Chatting: Start conversation

        Chatting --&gt; Online: Close chat
        Chatting --&gt; Typing: Composing message
        Chatting --&gt; Reacting: Add emoji reaction

        Typing --&gt; Chatting: Send message
        Reacting --&gt; Chatting: Reaction added

        Managing --&gt; Online: Settings saved
        Managing --&gt; ProfileEditing: Edit profile
        Managing --&gt; PrivacySettings: Adjust privacy

        ProfileEditing --&gt; Managing: Profile updated
        PrivacySettings --&gt; Managing: Privacy updated

        Online --&gt; Idle: No activity (5 min)
        Idle --&gt; Online: User interaction
        Idle --&gt; Offline: Extended inactivity
        Offline --&gt; Online: User returns
    }

    Active --&gt; Reported: User gets reported
    Active --&gt; Blocked: User blocks someone
    Active --&gt; Suspended: Admin action
    Active --&gt; Deactivated: User deactivates
    Active --&gt; Deleted: User deletes account

    Reported --&gt; UnderReview: Admin reviews report
    UnderReview --&gt; Active: Report dismissed
    UnderReview --&gt; Warned: Warning issued
    UnderReview --&gt; Suspended: Violation confirmed

    Warned --&gt; Active: Warning acknowledged

    Suspended --&gt; Active: Suspension lifted
    Suspended --&gt; Banned: Repeated violations

    Blocked --&gt; Active: User can unblock

    Deactivated --&gt; Active: User reactivates
    Deactivated --&gt; Deleted: Auto-delete after 30 days

    Banned --&gt; [*]: Account permanently closed
    Deleted --&gt; [*]: Account permanently removed

    note right of Active
        User can perform all app functions:
        - Send/receive messages
        - Make friend requests
        - Update profile
        - Access all features
    end note

    note right of Suspended
        Limited access:
        - Cannot send messages
        - Cannot make friend requests
        - Read-only access
    end note

    note right of Banned
        No access:
        - Account locked
        - Cannot log in
        - All data preserved for audit
    end note</code></pre>
<h1 id="chat-state-diagram">Chat State Diagram</h1>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; NoConversation: User has no active chats

    NoConversation --&gt; SearchingContacts: User searches for contacts
    NoConversation --&gt; ViewingRequests: User checks friend requests

    SearchingContacts --&gt; RequestSent: Send friend request
    SearchingContacts --&gt; NoConversation: Cancel search

    ViewingRequests --&gt; RequestAccepted: Accept friend request
    ViewingRequests --&gt; RequestRejected: Reject friend request
    ViewingRequests --&gt; NoConversation: Close requests

    RequestSent --&gt; Pending: Waiting for response
    RequestAccepted --&gt; Connected: Friendship established
    RequestRejected --&gt; NoConversation: Request declined

    Pending --&gt; Connected: Request accepted by other user
    Pending --&gt; RequestRejected: Request declined by other user
    Pending --&gt; NoConversation: Cancel pending request

    Connected --&gt; ChatActive: Open chat window

    state ChatActive {
        [*] --&gt; Viewing

        Viewing --&gt; Composing: Start typing message
        Viewing --&gt; Reacting: Click emoji reaction
        Viewing --&gt; MenuOpen: Open chat menu

        Composing --&gt; Sending: Send message
        Composing --&gt; Viewing: Cancel message

        Sending --&gt; MessageSent: Message delivered
        MessageSent --&gt; Viewing: Return to chat

        Reacting --&gt; ReactionSent: Reaction added
        ReactionSent --&gt; Viewing: Return to chat

        MenuOpen --&gt; Viewing: Close menu
        MenuOpen --&gt; Blocking: Block user
        MenuOpen --&gt; Reporting: Report user
        MenuOpen --&gt; ViewingProfile: View user profile

        ViewingProfile --&gt; Viewing: Return to chat

        Blocking --&gt; [*]: Chat blocked, exit to home
        Reporting --&gt; [*]: Report submitted, exit to home
    }

    ChatActive --&gt; Connected: Close chat window
    ChatActive --&gt; Blocked: User blocked
    ChatActive --&gt; Reported: User reported

    Connected --&gt; Unfriended: Remove friend
    Unfriended --&gt; NoConversation: Friendship ended

    Blocked --&gt; [*]: Chat permanently closed
    Reported --&gt; UnderReview: Report submitted for moderation

    UnderReview --&gt; Connected: Report dismissed
    UnderReview --&gt; Blocked: Report confirmed

    %% Message status substates
    state MessageSent {
        Delivered --&gt; Read: Recipient opens chat
        Delivered --&gt; Translated: Auto-translation applied
        Translated --&gt; Read: Recipient reads translated message
    }

    note right of Connected
        Users can exchange messages,
        see online status,
        react with emojis
    end note

    note right of Blocked
        No further communication possible,
        chat history preserved
    end note

    note left of Pending
        Friend request sent,
        waiting for other user's response
    end note</code></pre>
<h1 id="activity-diagrams">Activity Diagrams</h1>
<h1 id="activity-diagram-user-registration-flow">Activity Diagram (User Registration Flow)</h1>
<pre class="mermaid"><code>flowchart TD
    Start([User starts registration])

    SelectOAuthProvider[Select OAuth provider (Google, Facebook, etc.)]

    RedirectToProvider[Redirect to OAuth provider]
    UserAuthorizes{User authorizes app?}

    ReceiveAuthCode[Receive authorization code]
    ExchangeToken[Exchange code for access token]

    ValidateToken{Token valid?}
    GetUserInfo[Get user info from provider]

    CreateFirebaseAccount[Create Firebase account with OAuth]
    AccountExists{Account already exists?}

    StartOnboarding[Begin onboarding process]

    %% Profile Setup Flow
    EnterBasicInfo[Enter age and gender]
    ValidateBasic{Information valid?}

    EnterLocation[Enter residence/location]
    ValidateLocation{Location valid?}

    EnterLanguages[Select spoken languages]
    ValidateLanguages{At least one language?}

    EnterInterests[Add interests and hobbies]

    WriteBio[Write personal bio]
    ValidateBio{Bio appropriate?}

    SetPrivacy[Configure privacy settings]

    ReviewProfile[Review profile information]
    ConfirmProfile{Confirm profile?}

    SaveProfile[Save to Firestore]
    ProfileSaved{Profile saved successfully?}

    GenerateMatches[Generate initial matches]

    ShowWelcome[Show welcome message]
    RedirectHome[Redirect to Home/Dashboard]

    End([Registration complete])

    %% Error handling
    ShowOAuthError[Show OAuth authorization error]
    ShowTokenError[Show token validation error]
    ShowLoginOption[Show login option for existing users]
    ShowValidationError[Show field validation error]
    ShowBioError[Show inappropriate content warning]
    ShowSaveError[Show save error, retry]

    %% Flow connections
    Start --&gt; SelectOAuthProvider

    SelectOAuthProvider --&gt; RedirectToProvider
    RedirectToProvider --&gt; UserAuthorizes

    UserAuthorizes --&gt;|No| ShowOAuthError
    ShowOAuthError --&gt; SelectOAuthProvider
    UserAuthorizes --&gt;|Yes| ReceiveAuthCode

    ReceiveAuthCode --&gt; ExchangeToken
    ExchangeToken --&gt; ValidateToken
    ValidateToken --&gt;|No| ShowTokenError
    ShowTokenError --&gt; SelectOAuthProvider
    ValidateToken --&gt;|Yes| GetUserInfo

    GetUserInfo --&gt; CreateFirebaseAccount
    CreateFirebaseAccount --&gt; AccountExists
    AccountExists --&gt;|Yes| ShowLoginOption
    ShowLoginOption --&gt; SelectOAuthProvider
    AccountExists --&gt;|No| StartOnboarding

    StartOnboarding --&gt; EnterBasicInfo
    EnterBasicInfo --&gt; ValidateBasic
    ValidateBasic --&gt;|No| ShowValidationError
    ShowValidationError --&gt; EnterBasicInfo
    ValidateBasic --&gt;|Yes| EnterLocation

    EnterLocation --&gt; ValidateLocation
    ValidateLocation --&gt;|No| ShowValidationError
    ValidateLocation --&gt;|Yes| EnterLanguages

    EnterLanguages --&gt; ValidateLanguages
    ValidateLanguages --&gt;|No| ShowValidationError
    ValidateLanguages --&gt;|Yes| EnterInterests

    EnterInterests --&gt; WriteBio
    WriteBio --&gt; ValidateBio
    ValidateBio --&gt;|No| ShowBioError
    ShowBioError --&gt; WriteBio
    ValidateBio --&gt;|Yes| SetPrivacy

    SetPrivacy --&gt; ReviewProfile
    ReviewProfile --&gt; ConfirmProfile
    ConfirmProfile --&gt;|No| EnterBasicInfo
    ConfirmProfile --&gt;|Yes| SaveProfile

    SaveProfile --&gt; ProfileSaved
    ProfileSaved --&gt;|No| ShowSaveError
    ShowSaveError --&gt; SaveProfile
    ProfileSaved --&gt;|Yes| GenerateMatches

    GenerateMatches --&gt; ShowWelcome
    ShowWelcome --&gt; RedirectHome
    RedirectHome --&gt; End

    classDef startEnd fill:#ffcdd2
    classDef process fill:#c8e6c9
    classDef decision fill:#fff9c4
    classDef error fill:#ffcccb

    class Start,End startEnd
    class SelectOAuthProvider,RedirectToProvider,ReceiveAuthCode,ExchangeToken,GetUserInfo,CreateFirebaseAccount,StartOnboarding,EnterBasicInfo,EnterLocation,EnterLanguages,EnterInterests,WriteBio,SetPrivacy,ReviewProfile,SaveProfile,GenerateMatches,ShowWelcome,RedirectHome process
    class UserAuthorizes,ValidateToken,AccountExists,ValidateBasic,ValidateLocation,ValidateLanguages,ValidateBio,ConfirmProfile,ProfileSaved decision
    class ShowOAuthError,ShowTokenError,ShowLoginOption,ShowValidationError,ShowBioError,ShowSaveError error</code></pre>
<h1 id="message-processing-activity-diagram">Message Processing Activity Diagram</h1>
<pre class="mermaid"><code>flowchart TD
    Start([User sends message])

    ValidateInput{Message content valid?}
    ShowError[Show validation error]

    CheckFriendship{Users are friends?}
    ShowAuthError[Show authorization error]

    StoreMessage[Store original message in Firestore]
    StorageSuccess{Storage successful?}
    ShowStorageError[Show storage error]

    CheckTranslation{Translation needed?}

    %% Translation branch
    CallTranslationAPI[Call Translation API]
    TranslationSuccess{Translation successful?}
    StoreTranslation[Store translated message]
    UseOriginal[Use original message only]

    %% Content moderation branch
    parallel1{{Parallel Processing}}

    CheckContent[Analyze content with Moderation API]
    ContentClean{Content appropriate?}
    FlagContent[Flag message for review]
    AutoDelete[Auto-delete offensive content]
    NotifyModerators[Notify moderators]

    %% Notification branch
    PrepareNotification[Prepare push notification]
    CheckRecipientStatus{Recipient online?}
    SendPushNotification[Send FCM push notification]
    SkipPush[Skip push notification]

    %% Real-time update branch
    UpdateFirestore[Update Firestore with real-time trigger]
    NotifyRecipient[Send real-time update to recipient]
    UpdateSender[Confirm delivery to sender]

    %% Analytics branch
    LogAnalytics[Update message analytics]
    IncrementCount[Increment daily message count]

    End([Message processing complete])

    %% Error retry paths
    RetryStorage[Retry storage operation]
    RetryTranslation[Retry translation]
    RetryNotification[Retry notification]

    %% Main flow
    Start --&gt; ValidateInput
    ValidateInput --&gt;|No| ShowError
    ShowError --&gt; Start
    ValidateInput --&gt;|Yes| CheckFriendship

    CheckFriendship --&gt;|No| ShowAuthError
    ShowAuthError --&gt; End
    CheckFriendship --&gt;|Yes| StoreMessage

    StoreMessage --&gt; StorageSuccess
    StorageSuccess --&gt;|No| ShowStorageError
    ShowStorageError --&gt; RetryStorage
    RetryStorage --&gt; StoreMessage
    StorageSuccess --&gt;|Yes| CheckTranslation

    CheckTranslation --&gt;|Yes| CallTranslationAPI
    CheckTranslation --&gt;|No| parallel1

    CallTranslationAPI --&gt; TranslationSuccess
    TranslationSuccess --&gt;|Yes| StoreTranslation
    TranslationSuccess --&gt;|No| RetryTranslation
    RetryTranslation --&gt; CallTranslationAPI
    StoreTranslation --&gt; parallel1
    TranslationSuccess --&gt;|Retry failed| UseOriginal
    UseOriginal --&gt; parallel1

    %% Parallel processing branches
    parallel1 --&gt; CheckContent
    parallel1 --&gt; PrepareNotification
    parallel1 --&gt; UpdateFirestore
    parallel1 --&gt; LogAnalytics

    %% Content moderation flow
    CheckContent --&gt; ContentClean
    ContentClean --&gt;|Yes| UpdateFirestore
    ContentClean --&gt;|No| FlagContent
    FlagContent --&gt; AutoDelete
    AutoDelete --&gt; NotifyModerators
    NotifyModerators --&gt; End

    %% Notification flow
    PrepareNotification --&gt; CheckRecipientStatus
    CheckRecipientStatus --&gt;|Offline| SendPushNotification
    CheckRecipientStatus --&gt;|Online| SkipPush
    SendPushNotification --&gt; NotifyRecipient
    SkipPush --&gt; NotifyRecipient

    %% Real-time update flow
    UpdateFirestore --&gt; NotifyRecipient
    NotifyRecipient --&gt; UpdateSender
    UpdateSender --&gt; End

    %% Analytics flow
    LogAnalytics --&gt; IncrementCount
    IncrementCount --&gt; End

    classDef startEnd fill:#ffcdd2
    classDef process fill:#c8e6c9
    classDef decision fill:#fff9c4
    classDef error fill:#ffcccb
    classDef parallel fill:#e1bee7

    class Start,End startEnd
    class StoreMessage,CallTranslationAPI,StoreTranslation,CheckContent,PrepareNotification,UpdateFirestore,SendPushNotification,NotifyRecipient,UpdateSender,LogAnalytics,IncrementCount,FlagContent,AutoDelete,NotifyModerators process
    class ValidateInput,CheckFriendship,StorageSuccess,CheckTranslation,TranslationSuccess,ContentClean,CheckRecipientStatus decision
    class ShowError,ShowAuthError,ShowStorageError,RetryStorage,RetryTranslation,RetryNotification error
    class parallel1 parallel</code></pre>
<h1 id="admin-moderation-activity-diagram">Admin Moderation Activity Diagram</h1>
<h1 id="globetalk-admin-moderation-activity-diagram">GlobeTalk - Admin Moderation Activity Diagram</h1>
<pre class="mermaid"><code>flowchart TD
    Start([Admin starts moderation review])

    AccessDashboard[Access Admin Dashboard]
    CheckReports{Pending reports available?}

    NoReports[No reports to review]
    SelectReport[Select report to review]

    LoadReportDetails[Load report details from Firestore]
    ReviewContent[Review flagged content]
    CheckContext[Check conversation context]
    ReviewUserHistory[Review user's moderation history]

    MakeDecision{Moderation decision}

    %% Decision branches
    DismissReport[Dismiss report as invalid]
    WarnUser[Issue warning to user]
    SuspendUser[Suspend user account]
    BanUser[Permanently ban user]
    DeleteContent[Delete specific content]

    %% Dismiss flow
    UpdateReportStatus1[Update report status to dismissed]
    NotifyReporter1[Notify reporter of decision]
    LogAction1[Log dismissal action]

    %% Warning flow
    SendWarningNotification[Send warning notification to user]
    UpdateReportStatus2[Update report status to resolved]
    LogAction2[Log warning action]
    NotifyReporter2[Notify reporter of action taken]

    %% Suspension flow
    UpdateUserStatus1[Update user status to suspended]
    SetSuspensionDuration[Set suspension duration]
    SendSuspensionNotification[Send suspension notification]
    UpdateReportStatus3[Update report status to resolved]
    LogAction3[Log suspension action]
    NotifyReporter3[Notify reporter of action taken]

    %% Ban flow
    UpdateUserStatus2[Update user status to banned]
    SendBanNotification[Send ban notification]
    UpdateReportStatus4[Update report status to resolved]
    LogAction4[Log ban action]
    NotifyReporter4[Notify reporter of action taken]
    ArchiveUserData[Archive user data for audit]

    %% Delete content flow
    RemoveOffensiveContent[Remove flagged content]
    UpdateMessageStatus[Mark message as deleted]
    UpdateReportStatus5[Update report status to resolved]
    LogAction5[Log content deletion]
    NotifyReporter5[Notify reporter of action taken]

    %% Analytics update
    UpdateAnalytics[Update moderation analytics]

    CheckMoreReports{More reports to review?}

    GenerateReport{Generate summary report?}
    CreateCSVReport[Generate CSV report]
    CreatePDFReport[Generate PDF report]
    DownloadReport[Download report file]

    End([Moderation session complete])

    %% Flow connections
    Start --&gt; AccessDashboard
    AccessDashboard --&gt; CheckReports

    CheckReports --&gt;|No| NoReports
    CheckReports --&gt;|Yes| SelectReport
    NoReports --&gt; End

    SelectReport --&gt; LoadReportDetails
    LoadReportDetails --&gt; ReviewContent
    ReviewContent --&gt; CheckContext
    CheckContext --&gt; ReviewUserHistory
    ReviewUserHistory --&gt; MakeDecision

    MakeDecision --&gt;|Dismiss| DismissReport
    MakeDecision --&gt;|Warning| WarnUser
    MakeDecision --&gt;|Suspend| SuspendUser
    MakeDecision --&gt;|Ban| BanUser
    MakeDecision --&gt;|Delete Content| DeleteContent

    %% Dismiss path
    DismissReport --&gt; UpdateReportStatus1
    UpdateReportStatus1 --&gt; NotifyReporter1
    NotifyReporter1 --&gt; LogAction1
    LogAction1 --&gt; UpdateAnalytics

    %% Warning path
    WarnUser --&gt; SendWarningNotification
    SendWarningNotification --&gt; UpdateReportStatus2
    UpdateReportStatus2 --&gt; LogAction2
    LogAction2 --&gt; NotifyReporter2
    NotifyReporter2 --&gt; UpdateAnalytics

    %% Suspension path
    SuspendUser --&gt; UpdateUserStatus1
    UpdateUserStatus1 --&gt; SetSuspensionDuration
    SetSuspensionDuration --&gt; SendSuspensionNotification
    SendSuspensionNotification --&gt; UpdateReportStatus3
    UpdateReportStatus3 --&gt; LogAction3
    LogAction3 --&gt; NotifyReporter3
    NotifyReporter3 --&gt; UpdateAnalytics

    %% Ban path
    BanUser --&gt; UpdateUserStatus2
    UpdateUserStatus2 --&gt; SendBanNotification
    SendBanNotification --&gt; UpdateReportStatus4
    UpdateReportStatus4 --&gt; LogAction4
    LogAction4 --&gt; NotifyReporter4
    NotifyReporter4 --&gt; ArchiveUserData
    ArchiveUserData --&gt; UpdateAnalytics

    %% Delete content path
    DeleteContent --&gt; RemoveOffensiveContent
    RemoveOffensiveContent --&gt; UpdateMessageStatus
    UpdateMessageStatus --&gt; UpdateReportStatus5
    UpdateReportStatus5 --&gt; LogAction5
    LogAction5 --&gt; NotifyReporter5
    NotifyReporter5 --&gt; UpdateAnalytics

    %% Continue flow
    UpdateAnalytics --&gt; CheckMoreReports
    CheckMoreReports --&gt;|Yes| SelectReport
    CheckMoreReports --&gt;|No| GenerateReport

    GenerateReport --&gt;|Yes CSV| CreateCSVReport
    GenerateReport --&gt;|Yes PDF| CreatePDFReport
    GenerateReport --&gt;|No| End

    CreateCSVReport --&gt; DownloadReport
    CreatePDFReport --&gt; DownloadReport
    DownloadReport --&gt; End

    classDef startEnd fill:#ffcdd2
    classDef process fill:#c8e6c9
    classDef decision fill:#fff9c4
    classDef action fill:#fff3e0

    class Start,End,NoReports startEnd
    class AccessDashboard,LoadReportDetails,ReviewContent,CheckContext,ReviewUserHistory,UpdateReportStatus1,UpdateReportStatus2,UpdateReportStatus3,UpdateReportStatus4,UpdateReportStatus5,UpdateAnalytics,CreateCSVReport,CreatePDFReport,DownloadReport process
    class CheckReports,MakeDecision,CheckMoreReports,GenerateReport decision
    class DismissReport,WarnUser,SuspendUser,BanUser,DeleteContent,SendWarningNotification,SendSuspensionNotification,SendBanNotification,RemoveOffensiveContent,UpdateUserStatus1,UpdateUserStatus2,LogAction1,LogAction2,LogAction3,LogAction4,LogAction5 action</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>